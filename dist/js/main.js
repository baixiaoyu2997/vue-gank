"use strict";var _slicedToArray=function(){function t(t,e){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!e||r.length!==e);i=!0);}catch(t){n=!0,a=t}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Vue.component("list",{props:["dataItem","dataTitle"],template:'\n      <div>\n        <h3 class="header h3">{{dataTitle}}</h3>\n        <ul class="list_ul">\n          <li v-for="di in dataItem">\n            <a :href="di.url">{{di.desc}}</a>&nbsp;({{di.who?di.who:\'None\'}})\n            <ul v-if="di.images">\n              <li v-for="diImages in di.images" class="list_image"><a :href="di.url" target="_blank"><img :src="diImages" :title="di.desc"></a></li>\n            </ul>\n          </li>\n        </ul>\n     </div>\n      '});var vm=new Vue({el:"#app",data:{show:!1,currentYear:"",currentMonth:"",currentDate:"",headerTitle:"",preTitle:"",nextTitle:"",headerDate:"",fuliUrl:"",Android:[],iOS:[],"休息视频":[],"前端":[],"瞎推荐":[],"福利":[],"拓展资源":[],App:[],history:[]},beforeCreate:function(){axios.get("https://gank.io/api/day/history").then(function(t){vm.history=t.data.results;var e=vm.history[0].split("-"),r=_slicedToArray(e,3);vm.currentYear=r[0],vm.currentMonth=r[1],vm.currentDate=r[2]}).catch(function(t){console.log(t)})},computed:{preGank:function(){var t=this.history.indexOf(this.currentYear+"-"+this.currentMonth+"-"+this.currentDate);return 0!=t&&this.history[t-1]},nextGank:function(){var t=this.history.indexOf(this.currentYear+"-"+this.currentMonth+"-"+this.currentDate);return this.history.length-1!=t&&this.history[t+1]}},methods:{getDate:function(t){var e=this.currentYear,r=this.currentMonth,i=this.currentDate;return"pre"==t?this.preGank&&this.preGank.split("-"):"next"==t?this.nextGank&&this.nextGank.split("-"):[e,r,i]},getData:function(t){var e=this.getDate(t),r=_slicedToArray(e,3),i=r[0],n=r[1],a=r[2];axios.get("https://gank.io/api/day/"+i+"/"+n+"/"+a).then(function(t){var e=[];vm.iOS=e[0],vm.休息视频=e[1],vm.前端=e[2],vm.瞎推荐=e[3],vm.福利=e[4],vm.拓展资源=e[5],vm.App=e[6];for(var r in t.data.results)vm[r]=t.data.results[r];vm.show=!0,t.data.results["福利"]&&(vm.fuliUrl=t.data.results["福利"][0].url)})},getPreAndNextTitle:function(t){if(!this.getDate(t)){if("pre"==t)return void(vm.preTitle="");if("next"==t)return void(vm.nextTitle="")}var e=this.getDate(t),r=_slicedToArray(e,3),i=r[0],n=r[1],a=r[2];axios.get("https://gank.io/api/history/content/day/"+i+"/"+n+"/"+a).then(function(e){"pre"!=t?"next"!=t?vm.headerTitle=document.title=e.data.results[0].title:vm.nextTitle=e.data.results[0].title:vm.preTitle=e.data.results[0].title})},doNext:function(){var t=this.nextGank.split("-"),e=_slicedToArray(t,3);vm.currentYear=e[0],vm.currentMonth=e[1],vm.currentDate=e[2]},doPre:function(){var t=this.preGank.split("-"),e=_slicedToArray(t,3);vm.currentYear=e[0],vm.currentMonth=e[1],vm.currentDate=e[2]}},watch:{currentDate:function(){this.show=!1,this.getData(),this.getPreAndNextTitle(),this.getPreAndNextTitle("pre"),this.getPreAndNextTitle("next")}}});